---
import Layout from "@/layouts/Layout.astro";
import BodaBackground from "@/assets/boda-background.webp";
---

<Layout>
  <div id="logo-mask" class="fixed top-0 w-full h-screen">
    <section>
      <picture id="boda" class="h-screen scale-125 block overflow-hidden fixed">
        <img
          id="boda-background"
          src={BodaBackground.src}
          class="w-full h-full object-cover"
        />
      </picture>
    </section>
  </div>

  <div
    class="fixed flex flex-col items-center justify-between h-screen px-20 py-16 w-full"
  >
    <header class="flex justify-between w-full"></header>
    <footer id="boda-footer" class="absolute bottom-8 m-auto">
      <span
        class="absolute uppercase tracking-[6px] whitespace-nowrap text-center top-[49px] font-medium text-shadow-[0_0_2px_rgba(255,255,255,.5),0_0_8px_#000] left-1/2 -translate-x-1/2 text-lg"
      >
      </span>
    </footer>
  </div>

  <div
    id="logo-text-1"
    class="fixed w-full flex flex-col items-center justify-center top-[40%] opacity-0 pointer-events-none"
  >
    <h1 id="logo-text-1-h1">Pos eso, que nos casamos</h1>
    <div
      class="w-11/12 sm:w-3/4 md:w-1/2 lg:w-1/3 xl:w-1/4 max-w-[250px] mx-auto"
    >
      <img
        src="public/imgs/peques.jpeg"
        class="w-full h-auto rounded-lg shadow-lg mb-4"
        id="logo-text-1-img"
      />
    </div>
  </div>

  <div
    id="logo-text-2"
    class="fixed w-full flex flex-col items-center justify-center top-[20%] opacity-0 pointer-events-none"
  >
    <h1 id="logo-text-2-h1">¡Nos alegraría contar contigo en este día!</h1>
    <p id="logo-text-2-p1" class="opacity-0">
      Pero se nos está complicando los preparativos...
    </p>
    <div
      class="w-11/12 sm:w-3/4 md:w-1/2 lg:w-1/3 xl:w-1/4 max-w-[350px] mx-auto opacity-0"
      id="logo-text-2-imgs"
    >
      <div class="flex gap-2 justify-center">
        <img
          src="public/imgs/raque_dormida.jpeg"
          class="w-1/2 h-auto rounded-lg shadow-lg"
        />
        <img
          src="public/imgs/javi_corrigiendo.jpeg"
          class="w-1/2 h-auto rounded-lg shadow-lg"
        />
      </div>
    </div>
  </div>

  <div
    id="logo-text-3"
    class="fixed w-full flex flex-col items-center justify-center top-[20%] opacity-0 pointer-events-none"
  >
    <h1 id="logo-text-3-h1">¿Cómo será?</h1>
    <p id="logo-text-3-p1" class="opacity-0">
      1 Boda - 3 Fiestas (Mejor que Pocholo)
    </p>
    <div
      class="max-w-xs mx-auto flex flex-col items-center opacity-0"
      id="logo-text-3-img"
    >
      <img
        src="public/imgs/fiesta.jpg"
        class="w-4/5 h-auto rounded-lg shadow-lg mb-4"
      />
    </div>
  </div>

  <div
    id="logo-text-4"
    class="fixed w-full flex flex-col items-center justify-center top-[20%] opacity-0 pointer-events-none"
  >
    <h1 id="logo-text-4-h1">Fiesta 1: Ceremonia oficial</h1>
    <p id="logo-text-4-p1" class="opacity-0">Invitados: Familia más cercana</p>
    <p id="logo-text-4-p2" class="opacity-0">Lugar: Próximamente</p>
    <p id="logo-text-4-p3" class="opacity-0">Fecha: Próximamente</p>
  </div>

  <div
    id="logo-text-5"
    class="fixed w-full flex flex-col items-center justify-center top-[20%] opacity-0 pointer-events-none"
  >
    <h1 id="logo-text-5-h1">Fiesta 2: Celebración en Vigo</h1>
    <p id="logo-text-5-p1" class="opacity-0">Invitados: Amigos de la novia</p>
    <p id="logo-text-5-p2" class="opacity-0">Lugar: Próximamente</p>
    <p id="logo-text-5-p3" class="opacity-0">Fecha: Próximamente</p>
  </div>

  <div
    id="logo-text-6"
    class="fixed w-full flex flex-col items-center justify-center top-[20%] opacity-0 pointer-events-none"
  >
    <h1 id="logo-text-6-h1">Fiesta 3: Celebración en Madrid</h1>
    <p id="logo-text-6-p1" class="opacity-0">Invitados: Amigos del novio</p>
    <p id="logo-text-6-p2" class="opacity-0">Lugar: Próximamente</p>
    <p id="logo-text-6-p3" class="opacity-0">Fecha: Próximamente</p>
  </div>

  <div
    id="logo-text-7"
    class="fixed w-full flex flex-col items-center justify-center top-[10%] opacity-0 pointer-events-none"
  >
    <h1 id="logo-text-7-h1">¡Nos vemos pronto!</h1>
    <p id="logo-text-7-p1" class="opacity-0">Más detalles próximamente...</p>
    <div
      class="max-w-xs mx-auto flex flex-col items-center opacity-0"
      id="logo-text-7-img"
    >
      <img
        src="public/imgs/foto_juntos.jpeg"
        class="w-4/5 h-auto rounded-lg shadow-lg mb-4"
      />
    </div>
  </div>
</Layout>

<style>
  #logo-mask {
    background: white;
    mask-image: url("/boda/logo-stack.webp");
    mask-position: 50% 25%;
    mask-repeat: no-repeat;
    mask-size: clamp(10000vh, 3500%, 0vh);
  }
  h1 {
    font-family: Georgia, serif;
    color: #fffaf5;
    font-size: 2rem;
    padding: 1rem;
    text-align: center;
  }
  p {
    font-family: Georgia, serif;
    color: #fffaf5;
    font-size: 1.2rem;
    padding: 1rem;
    text-align: center;
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const tl = gsap.timeline({
    ease: "power2.out",
    scrollTrigger: {
      scrub: 3,
      start: "top top",
      end: "+=6000", // Aumentado de 3000 a 6000 para acomodar más secciones
      pin: true,
    },
  });

  tl.to("#boda", { duration: 3, scale: 1 })
    .to("#boda-footer", { opacity: 0 }, "<")
    .to(
      "#logo-mask",
      {
        maskSize: "clamp(20vh, 25%, 30vh)",
        duration: 4,
      },
      0.15
    )
    .to(
      "#boda",
      {
        opacity: 0,
        duration: 3,
      },
      0.4
    )
    // .to(
    //   "#logo-mask",
    //   {
    //     scale: 1.5,
    //   },
    //   0.15
    // )
    // Logo-text-1
    .to(
      "#logo-text-1",
      {
        opacity: 1,
        pointerEvents: "auto",
        scale: 1,
        duration: 3,
        ease: "power2.out",
      },
      "+=1"
    )
    .to(
      "#logo-text-1",
      {
        opacity: 0,
        pointerEvents: "none",
        scale: 0.5,
        duration: 3,
        ease: "power2.in",
      },
      "+=3"
    )
    .to(
      "#logo-mask",
      {
        opacity: 0,
        duration: 3,
      },
      "<"
    )

    // Logo-text-2
    .to("#logo-text-2", {
      opacity: 1,
      pointerEvents: "auto",
      scale: 1,
      duration: 3,
      ease: "power2.out",
    })
    .to(
      "#logo-text-2-p1",
      {
        opacity: 1,
        duration: 3,
        ease: "power2.out",
      },
      "+=0.5"
    )
    .to(
      "#logo-text-2-imgs",
      {
        opacity: 1,
        duration: 3,
        ease: "power2.out",
      },
      "+=0.5"
    )
    .to(
      "#logo-text-2",
      {
        opacity: 0,
        pointerEvents: "none",
        scale: 0.5,
        duration: 3,
        ease: "power2.in",
      },
      "+=3"
    )

    // Logo-text-3
    .to("#logo-text-3", {
      opacity: 1,
      pointerEvents: "auto",
      scale: 1,
      duration: 3,
      ease: "power2.out",
    })
    .to(
      ["#logo-text-3-p1", "#logo-text-3-img"], // Agrupados para que aparezcan juntos
      {
        opacity: 1,
        duration: 3,
        stagger: 0, // 0 significa que aparecen simultáneamente
        ease: "power2.out",
      },
      "+=0.5"
    )
    .to(
      "#logo-text-3",
      {
        opacity: 0,
        pointerEvents: "none",
        scale: 0.5,
        duration: 3,
        ease: "power2.in",
      },
      "+=3"
    )

    // Logo-text-4
    .to("#logo-text-4", {
      opacity: 1,
      pointerEvents: "auto",
      scale: 1,
      duration: 3,
      ease: "power2.out",
    })
    .to(
      ["#logo-text-4-p1", "#logo-text-4-p2", "#logo-text-4-p3"],
      {
        opacity: 1,
        duration: 3,
        stagger: 0, // 0 significa que todos aparecen al mismo tiempo
        ease: "power2.out",
      },
      "+=1"
    ) // Un poco más de pausa después del h1
    .to(
      "#logo-text-4",
      {
        opacity: 0,
        pointerEvents: "none",
        scale: 0.5,
        duration: 3,
        ease: "power2.in",
      },
      "+=3"
    )

    // Logo-text-5
    .to("#logo-text-5", {
      opacity: 1,
      pointerEvents: "auto",
      scale: 1,
      duration: 3,
      ease: "power2.out",
    })
    .to(
      ["#logo-text-5-p1", "#logo-text-5-p2", "#logo-text-5-p3"],
      {
        opacity: 1,
        duration: 3,
        stagger: 0, // 0 significa que todos aparecen al mismo tiempo
        ease: "power2.out",
      },
      "+=1"
    )
    .to(
      "#logo-text-5",
      {
        opacity: 0,
        pointerEvents: "none",
        scale: 0.5,
        duration: 3,
        ease: "power2.in",
      },
      "+=3"
    )

    // Logo-text-6
    .to("#logo-text-6", {
      opacity: 1,
      pointerEvents: "auto",
      scale: 1,
      duration: 3,
      ease: "power2.out",
    })
    .to(
      ["#logo-text-6-p1", "#logo-text-6-p2", "#logo-text-6-p3"],
      {
        opacity: 1,
        duration: 3,
        stagger: 0, // 0 significa que todos aparecen al mismo tiempo
        ease: "power2.out",
      },
      "+=1"
    )
    .to(
      "#logo-text-6",
      {
        opacity: 0,
        pointerEvents: "none",
        scale: 0.5,
        duration: 3,
        ease: "power2.in",
      },
      "+=3"
    )

    // Logo-text-7
    .to("#logo-text-7", {
      opacity: 1,
      pointerEvents: "auto",
      scale: 1,
      duration: 3,
      ease: "power2.out",
    })
    .to(
      ["#logo-text-7-img", "#logo-text-7-p1"], // Agrupar los elementos para que aparezcan juntos
      {
        opacity: 1,
        duration: 3,
        stagger: 0, // 0 significa que aparecen simultáneamente
        ease: "power2.out",
      },
      "+=0.5"
    )
    .to(
      "#logo-text-7",
      {
        opacity: 0,
        pointerEvents: "none",
        scale: 0.5,
        duration: 3,
        ease: "power2.in",
      },
      "+=3"
    );
</script>
